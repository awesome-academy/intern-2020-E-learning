<%= form_for [:admin, @user] do |f| %>
  <div class="form-group">
    <%= f.label :email do %>
      <%= t "field.email" %><span> *</span>
    <% end %>
    <%= f.email_field :email, class: "form-control", autofocus: true %>
    <%= display_error f.object, :email, t("field.email") %>
  </div>

  <%= f.fields_for :user_detail do |form| %>
    <%= render "user_detail_form", form: form %>
  <% end %>

  <% if current_user&.admin? %>
    <div class="form-group">
      <%= f.label :role, t("user.role") %>
      <%= f.collection_select :role, User.roles.keys, :to_s, :to_s %>
    </div>
  <% end %>

  <h3><%= t "common.my_avatar" %></h3>
    <%= render collection: @user.avatars_urls,
                           partial: "admin/users/avatar",
                           as: :avatar_url %>
  <br>

  <%= f.file_field :avatars, multiple: true %>

  <label>
    <%= f.check_box :remove_avatars %> <%= t "common.remove_avatar" %>
  </label>

  <div class="form-button">
    <%= f.submit yield(:button_text), class: "btn btn-primary" %>
    <%= link_to t("common.cancel"),
        admin_users_path,
        {class: "btn btn-light"} %>
  </div>
<% end %>
